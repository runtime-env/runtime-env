## 1. Implementation

- [ ] 1.1 Refactor `dev.ts`: Incorporate `runRuntimeEnvCommand`, `schemaFile`, `globalVariableName`, and implement `transformIndexHtml` logic (script injection + interpolation).
- [ ] 1.2 Refactor `build.ts`: Incorporate `runRuntimeEnvCommand` and implement `transformIndexHtml` logic (script injection only).
- [ ] 1.3 Refactor `preview.ts`: Incorporate `runRuntimeEnvCommand`.
- [ ] 1.4 Refactor `vitest.ts`: Incorporate `runRuntimeEnvCommand`.
- [ ] 1.5 Refactor `index.ts`: Return array of plugins and remove manual delegation logic.
- [ ] 1.6 Delete `utils.ts`.
- [ ] 1.7 Verify `comprehensive-vite` example builds and runs (manual check or run existing tests).
